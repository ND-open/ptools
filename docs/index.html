<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Data Fabric pipeline tools • ptools</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Data Fabric pipeline tools">
<meta property="og:description" content="Collection of function to handle simple task around
    HDFS (such as SAAGIE data fabric) projects.">
<meta property="og:image" content="/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">ptools</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="articles/ptools.html">Get started</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    

    
    
<!-- README.md is generated from README.Rmd. Please edit that file -->
<div id="ptools" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#ptools" class="anchor"></a>ptools <a href="https://www.next-decision.fr/"><img src="reference/figures/ptools_logo.png" align="right" height="139"></a>
</h1></div>
<!-- badges: start -->

<!-- [![packageversion](https://img.shields.io/badge/package%20version-x86_64-w64-mingw32, x86_64, mingw32, x86_64, mingw32, , 3, 5.3, 2019, 03, 11, 76217, R, R version 3.5.3 (2019-03-11), Great Truth-orange.svg)](https://github.com/ND-open/ptools/master/DESCRIPTION) blob/master/ -->
<div id="overview" class="section level3">
<h3 class="hasAnchor">
<a href="#overview" class="anchor"></a>Overview</h3>
<p><code>ptools</code> is a package to help you organize your data pipeline project. Since setting up a project follows recurrent step, a default procedure is suggested here to save time. The purpose is also to ease project upgrades and allow unit testing.</p>
<ul>
<li>See the <a href="https://nd-open.github.io/ptools/articles/ptools.html">Get Started</a> section for an introduction on how to use this package.</li>
<li>Got a idea or bug to report to improve this project ? Please check the <a href="https://github.com/ND-open/ptools">github page</a> and fill an issue, PR are welcome !</li>
</ul>
</div>
<div id="installation" class="section level3">
<h3 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h3>
<p>This package will be not be deployed to CRAN, you need to install it from github.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="co"># To install from github you need the package devtools first</span></a>
<a class="sourceLine" id="cb1-2" title="2"><span class="cf">if</span>(<span class="op">!</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">require</a></span>(<span class="st">"devtools"</span>, <span class="dt">character.only =</span> <span class="ot">TRUE</span>)){<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/install.packages">install.packages</a></span>(<span class="st">"devtools"</span>)}</a>
<a class="sourceLine" id="cb1-3" title="3"></a>
<a class="sourceLine" id="cb1-4" title="4"><span class="co"># Then you may intall ptools</span></a>
<a class="sourceLine" id="cb1-5" title="5">devtools<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/devtools/topics/reexports">install_github</a></span>(<span class="st">"ND-open/ptools"</span>)</a></code></pre></div>
</div>
<div id="organize-your-projects" class="section level3">
<h3 class="hasAnchor">
<a href="#organize-your-projects" class="anchor"></a>Organize your projects</h3>
<p>The first step of one project is to define what you want to do with your data. If there are several uses to your data you may want to cut your project in pieces. Straightforward runs will allow you to get quicker wins and also to keep your teams (end user, devs,… ) motivated.</p>
<p>By default the following structure is created to keep track of your data processing :</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1"><span class="co"># Assuming HDFS organisation</span></a>
<a class="sourceLine" id="cb2-2" title="2">hdfs</a>
<a class="sourceLine" id="cb2-3" title="3"><span class="op">|-</span><span class="st"> </span>landing</a>
<a class="sourceLine" id="cb2-4" title="4"><span class="op">|-</span><span class="st"> </span>data</a>
<a class="sourceLine" id="cb2-5" title="5">    <span class="op">|-</span><span class="st"> </span>raw</a>
<a class="sourceLine" id="cb2-6" title="6">    <span class="op">|-</span><span class="st"> </span>intermediate</a>
<a class="sourceLine" id="cb2-7" title="7">    <span class="op">|-</span><span class="st"> </span>final</a></code></pre></div>
<ul>
<li>
<code>landing</code> : contains only outside raw data that will processed then archived. If things goes to worst you will be able to start from scratch from there.</li>
<li>
<code>data</code> : your operations starts here, the default here is to process only csv files before building Impala or Hive tables.
<ul>
<li>
<code>raw</code> : for primary operations like processing the extension of your data (e.g from json to csv).</li>
<li>
<code>intermediate</code> : optionnal, depending on your pipeline you may want to reshape the data or add more cleaning steps.</li>
<li>
<code>final</code> : here will be stored the cleaned data that you want to build Impala or Hive tables uppon. The final clean data will be automatically converted to Impala (or Hive) tables from the final folder(s) on HDFS with the corresponding type. Then you may aggregate it using Hadoop.</li>
</ul>
</li>
</ul>
<p>There are several operations that you cannot perform easily or not at all in Impala/Hive (such as complex data transformation, reshaping, …). But you should perform joins using Hadoop to ensure that all the data is matched with what is intended no matter how delayed this data was uploaded and insure that your project is viable in time (e.g 5 years from now your R code might not be optimized to join on much more data).</p>
</div>
<div id="focus-on-cleaning-the-data" class="section level3">
<h3 class="hasAnchor">
<a href="#focus-on-cleaning-the-data" class="anchor"></a>Focus on cleaning the data</h3>
<p>Thus you can only focus on cleaning your data while not messing with the <code>landing folder</code>. The structure of your pipeline should look like :</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1">project_name</a>
<a class="sourceLine" id="cb3-2" title="2"><span class="op">|-</span><span class="st"> </span>.gitignore</a>
<a class="sourceLine" id="cb3-3" title="3"><span class="op">|-</span><span class="st"> </span>data</a>
<a class="sourceLine" id="cb3-4" title="4">   <span class="op">|-</span><span class="st"> </span>references.csv</a>
<a class="sourceLine" id="cb3-5" title="5"><span class="op">|-</span><span class="st"> </span>documents</a>
<a class="sourceLine" id="cb3-6" title="6">   <span class="op">|-</span><span class="st"> </span>meeting_notes.md</a>
<a class="sourceLine" id="cb3-7" title="7"><span class="op">|-</span><span class="st"> </span>R</a>
<a class="sourceLine" id="cb3-8" title="8">   <span class="op">|-</span><span class="st"> </span>raw_<span class="op">*</span>.R <span class="co"># e.g : raw_to_csv.csv</span></a>
<a class="sourceLine" id="cb3-9" title="9">   <span class="op">|-</span><span class="st"> </span>inter_<span class="op">*</span>.R <span class="co"># e.g : inter_reshape.R </span></a>
<a class="sourceLine" id="cb3-10" title="10">   <span class="op">|-</span><span class="st"> </span>final_<span class="op">*</span>.R <span class="co"># e.f : final_types</span></a>
<a class="sourceLine" id="cb3-11" title="11"><span class="op">|-</span><span class="st"> </span>project_name.Rproj</a>
<a class="sourceLine" id="cb3-12" title="12"><span class="op">|-</span><span class="st"> </span>README.md</a>
<a class="sourceLine" id="cb3-13" title="13"><span class="op">|-</span><span class="st"> </span>README.Rmd</a>
<a class="sourceLine" id="cb3-14" title="14"><span class="op">|-</span><span class="st"> </span>vignette</a>
<a class="sourceLine" id="cb3-15" title="15">   <span class="op">|-</span><span class="st"> </span>report.Rmd</a></code></pre></div>
<ul>
<li>In the R folder we will find one script per pipeline job. If there are more than one step the jobs should be prefixed with a number to keep track of the order. You should also add a name saying what the job does such as <code>inter_reshape.R</code> for an intermediate job than takes data from the <code>raw</code> folder, reshape it (e.g from long to wide format) and write to the <code>intermediate</code> folder.</li>
<li>In the <code>data</code> folder one can put variables dictionnary.</li>
<li>The <code>README.Rmd</code> file is the minimal documentation for you or a peer to retake your project later on.</li>
</ul>
</div>
<div id="to-package-or-not-to-package" class="section level3">
<h3 class="hasAnchor">
<a href="#to-package-or-not-to-package" class="anchor"></a>To package or not to package</h3>
<p>It is your choice to build a package from this structure to ensure reproducibility and stability of your code in time. You can also source your script for each pipeline job.</p>
<p>If you rely often on this pipeline or plan to have a stable code in time, the best thing to do is to package your code (from the structure above it is to add a <code>Description</code> file and compile + debug) and add a docker file.</p>
</div>
<div id="what-could-be-usefull-as-follow-up" class="section level3">
<h3 class="hasAnchor">
<a href="#what-could-be-usefull-as-follow-up" class="anchor"></a>What could be usefull as follow up</h3>
<ul>
<li>A way to test your data pipeline and not mess with the source data.</li>
<li>A way to automatically document and report on the work you have done :
<ul>
<li>how the data was gathered</li>
<li>data transformation and stats on cleanness / missingness</li>
<li>joins performed</li>
</ul>
</li>
<li>Tools to audit your pipelines :
<ul>
<li>How to set up daily report on the action performed and their quality.</li>
</ul>
</li>
</ul>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Camille Bonamy <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>

      <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://www.gnu.org/licenses/gpl-3.0.en.html"><img src="https://img.shields.io/badge/license-GPL--3-blue.svg" alt="license"></a></li>
<li><a href="https://www.tidyverse.org/lifecycle/#experimental"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="lifecycle"></a></li>
<li><a href="https://travis-ci.com/ND-open/ptools"><img src="https://travis-ci.com/ND-open/ptools.svg?branch=master" alt="Travis build status"></a></li>
<li><a href="https://ND-open.github.io/ptools/"><img src="https://img.shields.io/badge/documentation-pkgdown-E91E63.svg" alt="Documentation"></a></li>
</ul>
</div>
</div>

</div>


      <footer><div class="copyright">
  <p>Developed by Camille Bonamy.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
